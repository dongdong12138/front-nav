{"version":3,"sources":["main.js"],"names":["siteMap","name","url","JSON","parse","localStorage","getItem","console","log","forEach","value","$","on","e","preventDefault","prompt","indexOf","simpleUrl","push","setItem","stringify","$favicon","insertNode","insertBefore","replace","Array","from","onerror","src","toUpperCase","replaceAll","li","target","parent","nodeName","text","find","confirm","splice","index","remove","document","key","toLowerCase","href"],"mappings":";AAAA,IAAIA,EAAU,CACV,CAAEC,KAAM,WAAYC,IAAK,yBACzB,CAAED,KAAM,eAAgBC,IAAK,8BAEjCF,EAAUG,KAAKC,MAAMC,aAAaC,QAAQ,aAAeN,EACzDO,QAAQC,IAAI,WAAYR,GAKxBA,EAAQS,QAAQ,SAACC,GACFA,EAAAA,EAAMT,KAAMS,EAAMR,OAMjCS,EAAE,aAAaC,GAAG,QAAS,SAACC,GACtBC,EAAAA,iBAEEZ,IAAAA,EAAMa,OAAO,sBACb,GAACb,EAAD,CACwB,IAAxBA,EAAIc,QAAQ,UACN,EAAA,WAAad,GAEfM,QAAAA,IAAIN,GAERD,IAAAA,EAAOgB,EAAUf,GACVD,EAAAA,EAAMC,GAGTgB,EAAAA,KAAK,CAAEjB,KAAF,EAAQC,IAAR,IACAiB,aAAAA,QAAQ,UAAWhB,KAAKiB,UAAUpB,OAMnD,IAAIqB,EAAWV,EAAE,UA2DjB,SAASW,EAAWrB,EAAMC,GACZS,EACST,8BAAAA,EACKA,kCAAAA,EACJe,oDAAAA,EAAUhB,GAH9B,gOASIsB,aAAaZ,EAAE,+BAQvB,SAASM,EAAUf,GACRA,OAAAA,EAAIsB,QAAQ,WAAY,IACpBA,QAAQ,UAAW,IACnBA,QAAQ,OAAQ,IAChBA,QAAQ,OAAQ,IAhF/BC,MAAMC,KAAKL,GAAUZ,QAAQ,SAACC,GACpBiB,EAAAA,QAAU,SAACd,GACJF,EAAQM,MAAAA,EAAUP,EAAMkB,KAAK,GAAGC,cAAzC,QACGC,WAAWnB,EAAED,OAOxBC,EAAE,wCAAwCC,GAAG,QAAS,SAACC,GACjDC,EAAAA,iBAEEiB,IAAAA,EAAKpB,EAAEE,EAAEmB,QAAQC,SAASA,SAAS,GACnB,OAAhBF,EAAGG,WACEvB,EAAAA,EAAEE,EAAEmB,QAAQC,SAASA,SAASA,SAAS,IAExCzB,QAAAA,IAAIuB,GAGNI,IAAAA,EAAOxB,EAAEoB,GAAIK,KAAK,QAAQD,OACnBE,QAAiBF,SAAAA,EAA9B,SAIQG,EAAAA,OAAO3B,EAAEoB,GAAIQ,QAAS,GACjBpB,aAAAA,QAAQ,UAAWhB,KAAKiB,UAAUpB,IAE7C+B,EAAAA,GAAIS,YAMV7B,EAAE8B,UAAU7B,GAAG,WAAY,SAACC,GAChBL,QAAAA,IAAIK,EAAE6B,KACNA,IAAAA,EAAQ7B,EAAR6B,IACAjC,EAAAA,QAAQ,SAACC,GACTA,EAAMT,KAAK,KAAOyC,EAAIC,gBACbC,SAAAA,KAAOlC,EAAMR","file":"main.f59171ad.map","sourceRoot":"..\\src","sourcesContent":["let siteMap = [\r\n    { name: 'acfun.cn', url: 'https://www.acfun.cn/' },\r\n    { name: 'bilibili.com', url: 'https://www.bilibili.com/' },\r\n]\r\nsiteMap = JSON.parse(localStorage.getItem('siteMap')) || siteMap\r\nconsole.log('siteMap:', siteMap)\r\n\r\n/**\r\n * 遍历 siteMap，将数据渲染到页面中\r\n */\r\nsiteMap.forEach((value) => {\r\n    insertNode(value.name, value.url)\r\n})\r\n\r\n/**\r\n * 新增网站\r\n */\r\n$('.add-site').on('click', (e) => {\r\n    e.preventDefault()\r\n\r\n    let url = prompt('请输入网址，如: baidu.com')\r\n    if (!url) return\r\n    if (url.indexOf('http') !== 0) {\r\n        url = 'https://' + url\r\n    }\r\n    console.log(url)\r\n    // let name = url.replace('https://', '').replace('http://', '').replace('www.', '')\r\n    let name = simpleUrl(url)\r\n    insertNode(name, url)\r\n\r\n    // 将新增的网站数据 push 到 siteMap 中，并将 siteMap 存到 localStorage\r\n    siteMap.push({ name, url })\r\n    localStorage.setItem('siteMap', JSON.stringify(siteMap))\r\n})\r\n\r\n/**\r\n * 将加载失败的 favicon 替换成网站 url 首字母\r\n */\r\nlet $favicon = $('li img')\r\nArray.from($favicon).forEach((value) => {\r\n    value.onerror = (e) => {\r\n        let $p = $(`<p>${simpleUrl(value.src)[0].toUpperCase()}</p>`)\r\n        $p.replaceAll($(value))\r\n    }\r\n})\r\n\r\n/**\r\n * 删除指定网址\r\n */\r\n$('.site-list > li:not(:last-child) svg').on('click', (e) => {\r\n    e.preventDefault()\r\n\r\n    let li = $(e.target).parent().parent()[0]\r\n    if (li.nodeName !== 'LI') {\r\n        li = $(e.target).parent().parent().parent()[0]\r\n    }\r\n    console.log(li)\r\n\r\n    // 提示是否删除\r\n    const text = $(li).find('span').text()\r\n    const sure = confirm(`确定要删除 ${text} 吗？`)\r\n    if (!sure) return\r\n\r\n    // 将删除之后的数据更新到 localStorage\r\n    siteMap.splice($(li).index(), 1)\r\n    localStorage.setItem('siteMap', JSON.stringify(siteMap))\r\n\r\n    $(li).remove()\r\n})\r\n\r\n/**\r\n * 监听键盘事件，跳转到对应网站\r\n */\r\n$(document).on('keypress', (e) => {\r\n    console.log(e.key)\r\n    const { key } = e\r\n    siteMap.forEach((value) => {\r\n        if (value.name[0] === key.toLowerCase()) {\r\n            location.href = value.url\r\n        }\r\n    })\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * 向 .site-list 中插入节点\r\n * @param {String} name 网站名称\r\n * @param {String} url 网址\r\n */\r\nfunction insertNode(name, url) {\r\n    let $li = $(`<li>\r\n            <a href=\"${url}/\">\r\n                <img src=\"${url}/favicon.ico\" alt=\"logo\">\r\n                <span>${simpleUrl(name)}</span>\r\n                <svg class=\"icon\" aria-hidden=\"true\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n                    <use xlink:href=\"#icon-close\"></use>\r\n                </svg>\r\n            </a>\r\n        </li>`)\r\n    $li.insertBefore($('.site-list > li:last-child'))\r\n}\r\n\r\n/**\r\n * 简化 url\r\n * @param {String} url 链接\r\n * @returns 简化后的 url\r\n */\r\nfunction simpleUrl(url) {\r\n    return url.replace('https://', '')\r\n              .replace('http://', '')\r\n              .replace('www.', '')\r\n              .replace(/\\/.*/, '')\r\n}"]}